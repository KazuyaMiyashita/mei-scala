package meiall

import scala.xml.*

object MeiXML {

  def load(xml: Elem): meiall.mei.shared.Mei = {
    loadElement(xml) match {
      case m: meiall.mei.shared.Mei => m
      case other => throw new IllegalArgumentException(s"Root element must be 'mei', but got ${other.getClass.getSimpleName}")
    }
  }

  def loadElement(node: Node): meiall.Element = node match {
    case e: Elem =>
      val attributes: scala.collection.immutable.SeqMap[String, String] = scala.collection.immutable.SeqMap.from(
        e.attributes.map {
          case p: scala.xml.PrefixedAttribute => (s"${p.pre}:${p.key}", p.value.text)
          case u: scala.xml.UnprefixedAttribute => (u.key, u.value.text)
          case m => (m.key, m.value.text)
        }
      )
      val children = e.child.flatMap(n => Option(loadElement(n))).toList
      
      e.label match {
      case "abbr" => meiall.mei.edittrans.Abbr(children, attributes)
      case "accMat" => meiall.mei.msdesc.AccMat(children, attributes)
      case "accessRestrict" => meiall.mei.header.AccessRestrict(children, attributes)
      case "accid" => meiall.mei.shared.Accid(children, attributes)
      case "acquisition" => meiall.mei.header.Acquisition(children, attributes)
      case "actor" => meiall.mei.shared.Actor(children, attributes)
      case "add" => meiall.mei.edittrans.Add(children, attributes)
      case "addDesc" => meiall.mei.msdesc.AddDesc(children, attributes)
      case "addName" => meiall.mei.namesdates.AddName(children, attributes)
      case "addrLine" => meiall.mei.shared.AddrLine(children, attributes)
      case "address" => meiall.mei.shared.Address(children, attributes)
      case "altId" => meiall.mei.header.AltId(children, attributes)
      case "ambNote" => meiall.mei.shared.AmbNote(children, attributes)
      case "ambitus" => meiall.mei.shared.Ambitus(children, attributes)
      case "analytic" => meiall.mei.shared.Analytic(children, attributes)
      case "anchoredText" => meiall.mei.usersymbols.AnchoredText(children, attributes)
      case "annot" => meiall.mei.shared.Annot(children, attributes)
      case "app" => meiall.mei.critapp.App(children, attributes)
      case "appInfo" => meiall.mei.header.AppInfo(children, attributes)
      case "application" => meiall.mei.header.Application(children, attributes)
      case "argument" => meiall.mei.text.Argument(children, attributes)
      case "arpeg" => meiall.mei.cmn.Arpeg(children, attributes)
      case "arranger" => meiall.mei.shared.Arranger(children, attributes)
      case "artic" => meiall.mei.shared.Artic(children, attributes)
      case "attUsage" => meiall.mei.header.AttUsage(children, attributes)
      case "attacca" => meiall.mei.cmn.Attacca(children, attributes)
      case "audience" => meiall.mei.header.Audience(children, attributes)
      case "author" => meiall.mei.shared.Author(children, attributes)
      case "avFile" => meiall.mei.performance.AvFile(children, attributes)
      case "availability" => meiall.mei.header.Availability(children, attributes)
      case "bTrem" => meiall.mei.cmn.BTrem(children, attributes)
      case "back" => meiall.mei.text.Back(children, attributes)
      case "barLine" => meiall.mei.shared.BarLine(children, attributes)
      case "barre" => meiall.mei.stringtab.Barre(children, attributes)
      case "beam" => meiall.mei.cmn.Beam(children, attributes)
      case "beamSpan" => meiall.mei.cmn.BeamSpan(children, attributes)
      case "beatRpt" => meiall.mei.cmn.BeatRpt(children, attributes)
      case "bend" => meiall.mei.cmn.Bend(children, attributes)
      case "bibl" => meiall.mei.shared.Bibl(children, attributes)
      case "biblList" => meiall.mei.shared.BiblList(children, attributes)
      case "biblScope" => meiall.mei.shared.BiblScope(children, attributes)
      case "biblStruct" => meiall.mei.shared.BiblStruct(children, attributes)
      case "bifolium" => meiall.mei.header.Bifolium(children, attributes)
      case "binding" => meiall.mei.msdesc.Binding(children, attributes)
      case "bindingDesc" => meiall.mei.msdesc.BindingDesc(children, attributes)
      case "bloc" => meiall.mei.namesdates.Bloc(children, attributes)
      case "body" => meiall.mei.shared.Body(children, attributes)
      case "bracketSpan" => meiall.mei.cmn.BracketSpan(children, attributes)
      case "breath" => meiall.mei.cmn.Breath(children, attributes)
      case "byline" => meiall.mei.header.Byline(children, attributes)
      case "caesura" => meiall.mei.shared.Caesura(children, attributes)
      case "caption" => meiall.mei.shared.Caption(children, attributes)
      case "captureMode" => meiall.mei.header.CaptureMode(children, attributes)
      case "carrierForm" => meiall.mei.header.CarrierForm(children, attributes)
      case "castGrp" => meiall.mei.shared.CastGrp(children, attributes)
      case "castItem" => meiall.mei.shared.CastItem(children, attributes)
      case "castList" => meiall.mei.shared.CastList(children, attributes)
      case "catRel" => meiall.mei.header.CatRel(children, attributes)
      case "catchwords" => meiall.mei.msdesc.Catchwords(children, attributes)
      case "category" => meiall.mei.header.Category(children, attributes)
      case "cb" => meiall.mei.shared.Cb(children, attributes)
      case "cc" => meiall.mei.midi.Cc(children, attributes)
      case "chan" => meiall.mei.midi.Chan(children, attributes)
      case "chanPr" => meiall.mei.midi.ChanPr(children, attributes)
      case "change" => meiall.mei.header.Change(children, attributes)
      case "changeDesc" => meiall.mei.header.ChangeDesc(children, attributes)
      case "choice" => meiall.mei.edittrans.Choice(children, attributes)
      case "chord" => meiall.mei.shared.Chord(children, attributes)
      case "chordDef" => meiall.mei.harmony.ChordDef(children, attributes)
      case "chordMember" => meiall.mei.harmony.ChordMember(children, attributes)
      case "chordTable" => meiall.mei.harmony.ChordTable(children, attributes)
      case "classDecls" => meiall.mei.header.ClassDecls(children, attributes)
      case "classification" => meiall.mei.header.Classification(children, attributes)
      case "clef" => meiall.mei.shared.Clef(children, attributes)
      case "clefGrp" => meiall.mei.shared.ClefGrp(children, attributes)
      case "clip" => meiall.mei.performance.Clip(children, attributes)
      case "colLayout" => meiall.mei.shared.ColLayout(children, attributes)
      case "collation" => meiall.mei.msdesc.Collation(children, attributes)
      case "colophon" => meiall.mei.msdesc.Colophon(children, attributes)
      case "componentList" => meiall.mei.header.ComponentList(children, attributes)
      case "composer" => meiall.mei.shared.Composer(children, attributes)
      case "condition" => meiall.mei.header.Condition(children, attributes)
      case "contentItem" => meiall.mei.header.ContentItem(children, attributes)
      case "contents" => meiall.mei.header.Contents(children, attributes)
      case "context" => meiall.mei.header.Context(children, attributes)
      case "contributor" => meiall.mei.shared.Contributor(children, attributes)
      case "corpName" => meiall.mei.namesdates.CorpName(children, attributes)
      case "corr" => meiall.mei.edittrans.Corr(children, attributes)
      case "correction" => meiall.mei.header.Correction(children, attributes)
      case "country" => meiall.mei.namesdates.Country(children, attributes)
      case "course" => meiall.mei.stringtab.Course(children, attributes)
      case "cpMark" => meiall.mei.edittrans.CpMark(children, attributes)
      case "creation" => meiall.mei.shared.Creation(children, attributes)
      case "cue" => meiall.mei.midi.Cue(children, attributes)
      case "curve" => meiall.mei.usersymbols.Curve(children, attributes)
      case "custos" => meiall.mei.shared.Custos(children, attributes)
      case "cutout" => meiall.mei.header.Cutout(children, attributes)
      case "damage" => meiall.mei.edittrans.Damage(children, attributes)
      case "date" => meiall.mei.shared.Date(children, attributes)
      case "decoDesc" => meiall.mei.msdesc.DecoDesc(children, attributes)
      case "decoNote" => meiall.mei.msdesc.DecoNote(children, attributes)
      case "dedicatee" => meiall.mei.shared.Dedicatee(children, attributes)
      case "dedication" => meiall.mei.header.Dedication(children, attributes)
      case "del" => meiall.mei.edittrans.Del(children, attributes)
      case "depth" => meiall.mei.shared.Depth(children, attributes)
      case "desc" => meiall.mei.shared.Desc(children, attributes)
      case "dim" => meiall.mei.shared.Dim(children, attributes)
      case "dimensions" => meiall.mei.shared.Dimensions(children, attributes)
      case "dir" => meiall.mei.shared.Dir(children, attributes)
      case "distributor" => meiall.mei.shared.Distributor(children, attributes)
      case "district" => meiall.mei.namesdates.District(children, attributes)
      case "div" => meiall.mei.shared.Div(children, attributes)
      case "divLine" => meiall.mei.neumes.DivLine(children, attributes)
      case "domainsDecl" => meiall.mei.header.DomainsDecl(children, attributes)
      case "dot" => meiall.mei.shared.Dot(children, attributes)
      case "dynam" => meiall.mei.shared.Dynam(children, attributes)
      case "edition" => meiall.mei.shared.Edition(children, attributes)
      case "editionStmt" => meiall.mei.header.EditionStmt(children, attributes)
      case "editor" => meiall.mei.shared.Editor(children, attributes)
      case "editorialDecl" => meiall.mei.header.EditorialDecl(children, attributes)
      case "encodingDesc" => meiall.mei.header.EncodingDesc(children, attributes)
      case "ending" => meiall.mei.shared.Ending(children, attributes)
      case "epigraph" => meiall.mei.text.Epigraph(children, attributes)
      case "episema" => meiall.mei.neumes.Episema(children, attributes)
      case "event" => meiall.mei.shared.Event(children, attributes)
      case "eventList" => meiall.mei.shared.EventList(children, attributes)
      case "exhibHist" => meiall.mei.header.ExhibHist(children, attributes)
      case "expan" => meiall.mei.edittrans.Expan(children, attributes)
      case "expansion" => meiall.mei.shared.Expansion(children, attributes)
      case "explicit" => meiall.mei.msdesc.Explicit(children, attributes)
      case "expression" => meiall.mei.frbr.Expression(children, attributes)
      case "expressionList" => meiall.mei.frbr.ExpressionList(children, attributes)
      case "extData" => meiall.mei.shared.ExtData(children, attributes)
      case "extMeta" => meiall.mei.header.ExtMeta(children, attributes)
      case "extent" => meiall.mei.shared.Extent(children, attributes)
      case "f" => meiall.mei.harmony.F(children, attributes)
      case "fTrem" => meiall.mei.cmn.FTrem(children, attributes)
      case "facsimile" => meiall.mei.facsimile.Facsimile(children, attributes)
      case "famName" => meiall.mei.namesdates.FamName(children, attributes)
      case "fb" => meiall.mei.harmony.Fb(children, attributes)
      case "fermata" => meiall.mei.cmn.Fermata(children, attributes)
      case "fig" => meiall.mei.figtable.Fig(children, attributes)
      case "figDesc" => meiall.mei.figtable.FigDesc(children, attributes)
      case "fileChar" => meiall.mei.header.FileChar(children, attributes)
      case "fileDesc" => meiall.mei.header.FileDesc(children, attributes)
      case "fing" => meiall.mei.fingering.Fing(children, attributes)
      case "fingGrp" => meiall.mei.fingering.FingGrp(children, attributes)
      case "foliaDesc" => meiall.mei.header.FoliaDesc(children, attributes)
      case "foliation" => meiall.mei.msdesc.Foliation(children, attributes)
      case "folium" => meiall.mei.header.Folium(children, attributes)
      case "foreName" => meiall.mei.namesdates.ForeName(children, attributes)
      case "front" => meiall.mei.text.Front(children, attributes)
      case "funder" => meiall.mei.shared.Funder(children, attributes)
      case "gap" => meiall.mei.edittrans.Gap(children, attributes)
      case "genDesc" => meiall.mei.genetic.GenDesc(children, attributes)
      case "genName" => meiall.mei.namesdates.GenName(children, attributes)
      case "genState" => meiall.mei.genetic.GenState(children, attributes)
      case "genre" => meiall.mei.shared.Genre(children, attributes)
      case "geogFeat" => meiall.mei.namesdates.GeogFeat(children, attributes)
      case "geogName" => meiall.mei.namesdates.GeogName(children, attributes)
      case "gliss" => meiall.mei.cmn.Gliss(children, attributes)
      case "graceGrp" => meiall.mei.cmn.GraceGrp(children, attributes)
      case "graphic" => meiall.mei.figtable.Graphic(children, attributes)
      case "group" => meiall.mei.shared.Group(children, attributes)
      case "grpSym" => meiall.mei.shared.GrpSym(children, attributes)
      case "hairpin" => meiall.mei.cmn.Hairpin(children, attributes)
      case "halfmRpt" => meiall.mei.cmn.HalfmRpt(children, attributes)
      case "hand" => meiall.mei.header.Hand(children, attributes)
      case "handList" => meiall.mei.header.HandList(children, attributes)
      case "handShift" => meiall.mei.edittrans.HandShift(children, attributes)
      case "harm" => meiall.mei.harmony.Harm(children, attributes)
      case "harpPedal" => meiall.mei.cmn.HarpPedal(children, attributes)
      case "head" => meiall.mei.shared.Head(children, attributes)
      case "height" => meiall.mei.shared.Height(children, attributes)
      case "heraldry" => meiall.mei.msdesc.Heraldry(children, attributes)
      case "hex" => meiall.mei.midi.Hex(children, attributes)
      case "hispanTick" => meiall.mei.neumes.HispanTick(children, attributes)
      case "history" => meiall.mei.header.History(children, attributes)
      case "identifier" => meiall.mei.shared.Identifier(children, attributes)
      case "imprimatur" => meiall.mei.text.Imprimatur(children, attributes)
      case "imprint" => meiall.mei.shared.Imprint(children, attributes)
      case "incip" => meiall.mei.shared.Incip(children, attributes)
      case "incipCode" => meiall.mei.header.IncipCode(children, attributes)
      case "incipText" => meiall.mei.header.IncipText(children, attributes)
      case "inscription" => meiall.mei.header.Inscription(children, attributes)
      case "instrDef" => meiall.mei.midi.InstrDef(children, attributes)
      case "instrGrp" => meiall.mei.midi.InstrGrp(children, attributes)
      case "interpretation" => meiall.mei.header.Interpretation(children, attributes)
      case "item" => meiall.mei.frbr.Item(children, attributes)
      case "itemList" => meiall.mei.frbr.ItemList(children, attributes)
      case "key" => meiall.mei.header.Key(children, attributes)
      case "keyAccid" => meiall.mei.shared.KeyAccid(children, attributes)
      case "keySig" => meiall.mei.shared.KeySig(children, attributes)
      case "l" => meiall.mei.text.L(children, attributes)
      case "label" => meiall.mei.shared.Label(children, attributes)
      case "labelAbbr" => meiall.mei.shared.LabelAbbr(children, attributes)
      case "langUsage" => meiall.mei.header.LangUsage(children, attributes)
      case "language" => meiall.mei.header.Language(children, attributes)
      case "layer" => meiall.mei.shared.Layer(children, attributes)
      case "layerDef" => meiall.mei.shared.LayerDef(children, attributes)
      case "layout" => meiall.mei.msdesc.Layout(children, attributes)
      case "layoutDesc" => meiall.mei.msdesc.LayoutDesc(children, attributes)
      case "lb" => meiall.mei.shared.Lb(children, attributes)
      case "lem" => meiall.mei.critapp.Lem(children, attributes)
      case "lg" => meiall.mei.shared.Lg(children, attributes)
      case "li" => meiall.mei.text.Li(children, attributes)
      case "librettist" => meiall.mei.shared.Librettist(children, attributes)
      case "ligature" => meiall.mei.mensural.Ligature(children, attributes)
      case "line" => meiall.mei.usersymbols.Line(children, attributes)
      case "liquescent" => meiall.mei.neumes.Liquescent(children, attributes)
      case "list" => meiall.mei.text.List(children, attributes)
      case "locus" => meiall.mei.msdesc.Locus(children, attributes)
      case "locusGrp" => meiall.mei.msdesc.LocusGrp(children, attributes)
      case "lv" => meiall.mei.cmn.Lv(children, attributes)
      case "lyricist" => meiall.mei.shared.Lyricist(children, attributes)
      case "mNum" => meiall.mei.cmn.MNum(children, attributes)
      case "mRest" => meiall.mei.cmn.MRest(children, attributes)
      case "mRpt" => meiall.mei.cmn.MRpt(children, attributes)
      case "mRpt2" => meiall.mei.cmn.MRpt2(children, attributes)
      case "mSpace" => meiall.mei.cmn.MSpace(children, attributes)
      case "manifestation" => meiall.mei.frbr.Manifestation(children, attributes)
      case "manifestationList" => meiall.mei.frbr.ManifestationList(children, attributes)
      case "mapping" => meiall.mei.usersymbols.Mapping(children, attributes)
      case "marker" => meiall.mei.midi.Marker(children, attributes)
      case "mdiv" => meiall.mei.shared.Mdiv(children, attributes)
      case "measure" => meiall.mei.cmn.Measure(children, attributes)
      case "mei" => meiall.mei.shared.Mei(children, attributes)
      case "meiCorpus" => meiall.mei.corpus.MeiCorpus(children, attributes)
      case "meiHead" => meiall.mei.header.MeiHead(children, attributes)
      case "mensur" => meiall.mei.mensural.Mensur(children, attributes)
      case "mensuration" => meiall.mei.header.Mensuration(children, attributes)
      case "metaMark" => meiall.mei.edittrans.MetaMark(children, attributes)
      case "metaText" => meiall.mei.midi.MetaText(children, attributes)
      case "meter" => meiall.mei.header.Meter(children, attributes)
      case "meterSig" => meiall.mei.cmn.MeterSig(children, attributes)
      case "meterSigGrp" => meiall.mei.cmn.MeterSigGrp(children, attributes)
      case "midi" => meiall.mei.midi.Midi(children, attributes)
      case "monogr" => meiall.mei.shared.Monogr(children, attributes)
      case "mordent" => meiall.mei.cmnornaments.Mordent(children, attributes)
      case "multiRest" => meiall.mei.cmn.MultiRest(children, attributes)
      case "multiRpt" => meiall.mei.cmn.MultiRpt(children, attributes)
      case "music" => meiall.mei.shared.Music(children, attributes)
      case "name" => meiall.mei.shared.Name(children, attributes)
      case "nameLink" => meiall.mei.namesdates.NameLink(children, attributes)
      case "namespace" => meiall.mei.header.Namespace(children, attributes)
      case "nc" => meiall.mei.neumes.Nc(children, attributes)
      case "ncGrp" => meiall.mei.neumes.NcGrp(children, attributes)
      case "neume" => meiall.mei.neumes.Neume(children, attributes)
      case "normalization" => meiall.mei.header.Normalization(children, attributes)
      case "note" => meiall.mei.shared.Note(children, attributes)
      case "noteOff" => meiall.mei.midi.NoteOff(children, attributes)
      case "noteOn" => meiall.mei.midi.NoteOn(children, attributes)
      case "notesStmt" => meiall.mei.header.NotesStmt(children, attributes)
      case "num" => meiall.mei.shared.Num(children, attributes)
      case "oLayer" => meiall.mei.cmn.OLayer(children, attributes)
      case "oStaff" => meiall.mei.cmn.OStaff(children, attributes)
      case "octave" => meiall.mei.cmn.Octave(children, attributes)
      case "orig" => meiall.mei.edittrans.Orig(children, attributes)
      case "oriscus" => meiall.mei.neumes.Oriscus(children, attributes)
      case "ornam" => meiall.mei.shared.Ornam(children, attributes)
      case "ossia" => meiall.mei.cmn.Ossia(children, attributes)
      case "otherChar" => meiall.mei.header.OtherChar(children, attributes)
      case "p" => meiall.mei.shared.P(children, attributes)
      case "pad" => meiall.mei.shared.Pad(children, attributes)
      case "part" => meiall.mei.shared.Part(children, attributes)
      case "parts" => meiall.mei.shared.Parts(children, attributes)
      case "patch" => meiall.mei.header.Patch(children, attributes)
      case "pb" => meiall.mei.shared.Pb(children, attributes)
      case "pedal" => meiall.mei.cmn.Pedal(children, attributes)
      case "perfDuration" => meiall.mei.header.PerfDuration(children, attributes)
      case "perfMedium" => meiall.mei.header.PerfMedium(children, attributes)
      case "perfRes" => meiall.mei.header.PerfRes(children, attributes)
      case "perfResList" => meiall.mei.header.PerfResList(children, attributes)
      case "performance" => meiall.mei.performance.Performance(children, attributes)
      case "periodName" => meiall.mei.namesdates.PeriodName(children, attributes)
      case "persName" => meiall.mei.namesdates.PersName(children, attributes)
      case "pgDesc" => meiall.mei.shared.PgDesc(children, attributes)
      case "pgFoot" => meiall.mei.shared.PgFoot(children, attributes)
      case "pgHead" => meiall.mei.shared.PgHead(children, attributes)
      case "phrase" => meiall.mei.shared.Phrase(children, attributes)
      case "physDesc" => meiall.mei.header.PhysDesc(children, attributes)
      case "physLoc" => meiall.mei.shared.PhysLoc(children, attributes)
      case "physMedium" => meiall.mei.header.PhysMedium(children, attributes)
      case "plateNum" => meiall.mei.header.PlateNum(children, attributes)
      case "playingSpeed" => meiall.mei.header.PlayingSpeed(children, attributes)
      case "plica" => meiall.mei.mensural.Plica(children, attributes)
      case "port" => meiall.mei.midi.Port(children, attributes)
      case "postBox" => meiall.mei.namesdates.PostBox(children, attributes)
      case "postCode" => meiall.mei.namesdates.PostCode(children, attributes)
      case "price" => meiall.mei.header.Price(children, attributes)
      case "prog" => meiall.mei.midi.Prog(children, attributes)
      case "projectDesc" => meiall.mei.header.ProjectDesc(children, attributes)
      case "propName" => meiall.mei.usersymbols.PropName(children, attributes)
      case "propValue" => meiall.mei.usersymbols.PropValue(children, attributes)
      case "proport" => meiall.mei.mensural.Proport(children, attributes)
      case "provenance" => meiall.mei.header.Provenance(children, attributes)
      case "ptr" => meiall.mei.ptrref.Ptr(children, attributes)
      case "pubPlace" => meiall.mei.shared.PubPlace(children, attributes)
      case "pubStmt" => meiall.mei.header.PubStmt(children, attributes)
      case "publisher" => meiall.mei.shared.Publisher(children, attributes)
      case "q" => meiall.mei.text.Q(children, attributes)
      case "quilisma" => meiall.mei.neumes.Quilisma(children, attributes)
      case "quote" => meiall.mei.text.Quote(children, attributes)
      case "rdg" => meiall.mei.critapp.Rdg(children, attributes)
      case "recipient" => meiall.mei.shared.Recipient(children, attributes)
      case "recording" => meiall.mei.performance.Recording(children, attributes)
      case "ref" => meiall.mei.ptrref.Ref(children, attributes)
      case "refrain" => meiall.mei.lyrics.Refrain(children, attributes)
      case "reg" => meiall.mei.edittrans.Reg(children, attributes)
      case "region" => meiall.mei.namesdates.Region(children, attributes)
      case "reh" => meiall.mei.cmn.Reh(children, attributes)
      case "relatedItem" => meiall.mei.shared.RelatedItem(children, attributes)
      case "relation" => meiall.mei.shared.Relation(children, attributes)
      case "relationList" => meiall.mei.shared.RelationList(children, attributes)
      case "rend" => meiall.mei.shared.Rend(children, attributes)
      case "repeatMark" => meiall.mei.cmn.RepeatMark(children, attributes)
      case "repository" => meiall.mei.shared.Repository(children, attributes)
      case "resp" => meiall.mei.shared.Resp(children, attributes)
      case "respStmt" => meiall.mei.shared.RespStmt(children, attributes)
      case "rest" => meiall.mei.shared.Rest(children, attributes)
      case "restore" => meiall.mei.edittrans.Restore(children, attributes)
      case "revisionDesc" => meiall.mei.header.RevisionDesc(children, attributes)
      case "role" => meiall.mei.shared.Role(children, attributes)
      case "roleDesc" => meiall.mei.shared.RoleDesc(children, attributes)
      case "roleName" => meiall.mei.namesdates.RoleName(children, attributes)
      case "rubric" => meiall.mei.msdesc.Rubric(children, attributes)
      case "samplingDecl" => meiall.mei.header.SamplingDecl(children, attributes)
      case "sb" => meiall.mei.shared.Sb(children, attributes)
      case "score" => meiall.mei.shared.Score(children, attributes)
      case "scoreDef" => meiall.mei.shared.ScoreDef(children, attributes)
      case "scoreFormat" => meiall.mei.header.ScoreFormat(children, attributes)
      case "scriptDesc" => meiall.mei.msdesc.ScriptDesc(children, attributes)
      case "scriptNote" => meiall.mei.msdesc.ScriptNote(children, attributes)
      case "seal" => meiall.mei.msdesc.Seal(children, attributes)
      case "sealDesc" => meiall.mei.msdesc.SealDesc(children, attributes)
      case "secFolio" => meiall.mei.msdesc.SecFolio(children, attributes)
      case "section" => meiall.mei.shared.Section(children, attributes)
      case "seg" => meiall.mei.text.Seg(children, attributes)
      case "segmentation" => meiall.mei.header.Segmentation(children, attributes)
      case "seqNum" => meiall.mei.midi.SeqNum(children, attributes)
      case "series" => meiall.mei.shared.Series(children, attributes)
      case "seriesStmt" => meiall.mei.header.SeriesStmt(children, attributes)
      case "settlement" => meiall.mei.namesdates.Settlement(children, attributes)
      case "sic" => meiall.mei.edittrans.Sic(children, attributes)
      case "signatures" => meiall.mei.msdesc.Signatures(children, attributes)
      case "signifLet" => meiall.mei.neumes.SignifLet(children, attributes)
      case "slur" => meiall.mei.cmn.Slur(children, attributes)
      case "soundChan" => meiall.mei.header.SoundChan(children, attributes)
      case "source" => meiall.mei.header.Source(children, attributes)
      case "sourceDesc" => meiall.mei.header.SourceDesc(children, attributes)
      case "sp" => meiall.mei.drama.Sp(children, attributes)
      case "space" => meiall.mei.shared.Space(children, attributes)
      case "speaker" => meiall.mei.shared.Speaker(children, attributes)
      case "specRepro" => meiall.mei.header.SpecRepro(children, attributes)
      case "sponsor" => meiall.mei.shared.Sponsor(children, attributes)
      case "stack" => meiall.mei.shared.Stack(children, attributes)
      case "staff" => meiall.mei.shared.Staff(children, attributes)
      case "staffDef" => meiall.mei.shared.StaffDef(children, attributes)
      case "staffGrp" => meiall.mei.shared.StaffGrp(children, attributes)
      case "stageDir" => meiall.mei.drama.StageDir(children, attributes)
      case "stamp" => meiall.mei.msdesc.Stamp(children, attributes)
      case "stdVals" => meiall.mei.header.StdVals(children, attributes)
      case "stem" => meiall.mei.mensural.Stem(children, attributes)
      case "street" => meiall.mei.namesdates.Street(children, attributes)
      case "string" => meiall.mei.stringtab.String(children, attributes)
      case "strophicus" => meiall.mei.neumes.Strophicus(children, attributes)
      case "styleName" => meiall.mei.namesdates.StyleName(children, attributes)
      case "subst" => meiall.mei.edittrans.Subst(children, attributes)
      case "supplied" => meiall.mei.edittrans.Supplied(children, attributes)
      case "support" => meiall.mei.msdesc.Support(children, attributes)
      case "supportDesc" => meiall.mei.msdesc.SupportDesc(children, attributes)
      case "surface" => meiall.mei.facsimile.Surface(children, attributes)
      case "syl" => meiall.mei.shared.Syl(children, attributes)
      case "syllable" => meiall.mei.neumes.Syllable(children, attributes)
      case "symName" => meiall.mei.usersymbols.SymName(children, attributes)
      case "symProp" => meiall.mei.usersymbols.SymProp(children, attributes)
      case "symbol" => meiall.mei.shared.Symbol(children, attributes)
      case "symbolDef" => meiall.mei.usersymbols.SymbolDef(children, attributes)
      case "symbolTable" => meiall.mei.usersymbols.SymbolTable(children, attributes)
      case "sysReq" => meiall.mei.header.SysReq(children, attributes)
      case "tabDurSym" => meiall.mei.stringtab.TabDurSym(children, attributes)
      case "tabGrp" => meiall.mei.stringtab.TabGrp(children, attributes)
      case "table" => meiall.mei.figtable.Table(children, attributes)
      case "tagUsage" => meiall.mei.header.TagUsage(children, attributes)
      case "tagsDecl" => meiall.mei.header.TagsDecl(children, attributes)
      case "taxonomy" => meiall.mei.header.Taxonomy(children, attributes)
      case "td" => meiall.mei.figtable.Td(children, attributes)
      case "tempo" => meiall.mei.shared.Tempo(children, attributes)
      case "term" => meiall.mei.shared.Term(children, attributes)
      case "termList" => meiall.mei.header.TermList(children, attributes)
      case "textLang" => meiall.mei.shared.TextLang(children, attributes)
      case "th" => meiall.mei.figtable.Th(children, attributes)
      case "tie" => meiall.mei.cmn.Tie(children, attributes)
      case "title" => meiall.mei.shared.Title(children, attributes)
      case "titlePage" => meiall.mei.shared.TitlePage(children, attributes)
      case "titlePart" => meiall.mei.shared.TitlePart(children, attributes)
      case "titleStmt" => meiall.mei.header.TitleStmt(children, attributes)
      case "tr" => meiall.mei.figtable.Tr(children, attributes)
      case "trackConfig" => meiall.mei.header.TrackConfig(children, attributes)
      case "treatHist" => meiall.mei.header.TreatHist(children, attributes)
      case "treatSched" => meiall.mei.header.TreatSched(children, attributes)
      case "trill" => meiall.mei.cmnornaments.Trill(children, attributes)
      case "trkName" => meiall.mei.midi.TrkName(children, attributes)
      case "tuning" => meiall.mei.shared.Tuning(children, attributes)
      case "tuplet" => meiall.mei.cmn.Tuplet(children, attributes)
      case "tupletSpan" => meiall.mei.cmn.TupletSpan(children, attributes)
      case "turn" => meiall.mei.cmnornaments.Turn(children, attributes)
      case "typeDesc" => meiall.mei.msdesc.TypeDesc(children, attributes)
      case "typeNote" => meiall.mei.msdesc.TypeNote(children, attributes)
      case "unclear" => meiall.mei.edittrans.Unclear(children, attributes)
      case "unpub" => meiall.mei.header.Unpub(children, attributes)
      case "useRestrict" => meiall.mei.header.UseRestrict(children, attributes)
      case "vel" => meiall.mei.midi.Vel(children, attributes)
      case "verse" => meiall.mei.lyrics.Verse(children, attributes)
      case "volta" => meiall.mei.lyrics.Volta(children, attributes)
      case "watermark" => meiall.mei.header.Watermark(children, attributes)
      case "when" => meiall.mei.performance.When(children, attributes)
      case "width" => meiall.mei.shared.Width(children, attributes)
      case "work" => meiall.mei.header.Work(children, attributes)
      case "workList" => meiall.mei.header.WorkList(children, attributes)
      case "zone" => meiall.mei.facsimile.Zone(children, attributes)
        case _ => throw new IllegalArgumentException(s"Unknown tag: ${e.label}")
      }

    case t: scala.xml.Text => meiall.Text(t.text)
    case _ => null // Ignore comments, etc.
  } 
  
  private def mkAttributes(attributes: scala.collection.immutable.SeqMap[String, String]): MetaData = {
    attributes.foldRight[MetaData](Null) { case ((k, v), acc) =>
      if (k.contains(":")) {
        val parts = k.split(":", 2)
        new PrefixedAttribute(parts(0), parts(1), v, acc)
      } else {
        new UnprefixedAttribute(k, v, acc)
      }
    }
  }

  private val meiScope = scala.xml.NamespaceBinding(null, "http://www.music-encoding.org/ns/mei", scala.xml.TopScope)

  def toXml(element: meiall.Element): Node = toXmlWithScope(element, meiScope)

  private def toXmlWithScope(element: meiall.Element, scope: NamespaceBinding): Node = element match {
    case meiall.Text(value) => scala.xml.Text(value)
    case e: meiall.mei.edittrans.Abbr => new scala.xml.Elem(null, "abbr", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.AccMat => new scala.xml.Elem(null, "accMat", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.AccessRestrict => new scala.xml.Elem(null, "accessRestrict", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Accid => new scala.xml.Elem(null, "accid", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Acquisition => new scala.xml.Elem(null, "acquisition", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Actor => new scala.xml.Elem(null, "actor", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Add => new scala.xml.Elem(null, "add", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.AddDesc => new scala.xml.Elem(null, "addDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.AddName => new scala.xml.Elem(null, "addName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.AddrLine => new scala.xml.Elem(null, "addrLine", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Address => new scala.xml.Elem(null, "address", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.AltId => new scala.xml.Elem(null, "altId", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.AmbNote => new scala.xml.Elem(null, "ambNote", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Ambitus => new scala.xml.Elem(null, "ambitus", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Analytic => new scala.xml.Elem(null, "analytic", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.AnchoredText => new scala.xml.Elem(null, "anchoredText", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Annot => new scala.xml.Elem(null, "annot", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.critapp.App => new scala.xml.Elem(null, "app", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.AppInfo => new scala.xml.Elem(null, "appInfo", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Application => new scala.xml.Elem(null, "application", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Argument => new scala.xml.Elem(null, "argument", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Arpeg => new scala.xml.Elem(null, "arpeg", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Arranger => new scala.xml.Elem(null, "arranger", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Artic => new scala.xml.Elem(null, "artic", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.AttUsage => new scala.xml.Elem(null, "attUsage", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Attacca => new scala.xml.Elem(null, "attacca", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Audience => new scala.xml.Elem(null, "audience", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Author => new scala.xml.Elem(null, "author", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.performance.AvFile => new scala.xml.Elem(null, "avFile", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Availability => new scala.xml.Elem(null, "availability", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.BTrem => new scala.xml.Elem(null, "bTrem", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Back => new scala.xml.Elem(null, "back", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.BarLine => new scala.xml.Elem(null, "barLine", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.stringtab.Barre => new scala.xml.Elem(null, "barre", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Beam => new scala.xml.Elem(null, "beam", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.BeamSpan => new scala.xml.Elem(null, "beamSpan", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.BeatRpt => new scala.xml.Elem(null, "beatRpt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Bend => new scala.xml.Elem(null, "bend", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Bibl => new scala.xml.Elem(null, "bibl", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.BiblList => new scala.xml.Elem(null, "biblList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.BiblScope => new scala.xml.Elem(null, "biblScope", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.BiblStruct => new scala.xml.Elem(null, "biblStruct", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Bifolium => new scala.xml.Elem(null, "bifolium", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Binding => new scala.xml.Elem(null, "binding", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.BindingDesc => new scala.xml.Elem(null, "bindingDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.Bloc => new scala.xml.Elem(null, "bloc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Body => new scala.xml.Elem(null, "body", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.BracketSpan => new scala.xml.Elem(null, "bracketSpan", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Breath => new scala.xml.Elem(null, "breath", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Byline => new scala.xml.Elem(null, "byline", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Caesura => new scala.xml.Elem(null, "caesura", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Caption => new scala.xml.Elem(null, "caption", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.CaptureMode => new scala.xml.Elem(null, "captureMode", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.CarrierForm => new scala.xml.Elem(null, "carrierForm", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.CastGrp => new scala.xml.Elem(null, "castGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.CastItem => new scala.xml.Elem(null, "castItem", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.CastList => new scala.xml.Elem(null, "castList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.CatRel => new scala.xml.Elem(null, "catRel", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Catchwords => new scala.xml.Elem(null, "catchwords", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Category => new scala.xml.Elem(null, "category", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Cb => new scala.xml.Elem(null, "cb", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Cc => new scala.xml.Elem(null, "cc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Chan => new scala.xml.Elem(null, "chan", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.ChanPr => new scala.xml.Elem(null, "chanPr", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Change => new scala.xml.Elem(null, "change", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ChangeDesc => new scala.xml.Elem(null, "changeDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Choice => new scala.xml.Elem(null, "choice", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Chord => new scala.xml.Elem(null, "chord", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.harmony.ChordDef => new scala.xml.Elem(null, "chordDef", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.harmony.ChordMember => new scala.xml.Elem(null, "chordMember", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.harmony.ChordTable => new scala.xml.Elem(null, "chordTable", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ClassDecls => new scala.xml.Elem(null, "classDecls", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Classification => new scala.xml.Elem(null, "classification", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Clef => new scala.xml.Elem(null, "clef", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.ClefGrp => new scala.xml.Elem(null, "clefGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.performance.Clip => new scala.xml.Elem(null, "clip", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.ColLayout => new scala.xml.Elem(null, "colLayout", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Collation => new scala.xml.Elem(null, "collation", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Colophon => new scala.xml.Elem(null, "colophon", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ComponentList => new scala.xml.Elem(null, "componentList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Composer => new scala.xml.Elem(null, "composer", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Condition => new scala.xml.Elem(null, "condition", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ContentItem => new scala.xml.Elem(null, "contentItem", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Contents => new scala.xml.Elem(null, "contents", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Context => new scala.xml.Elem(null, "context", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Contributor => new scala.xml.Elem(null, "contributor", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.CorpName => new scala.xml.Elem(null, "corpName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Corr => new scala.xml.Elem(null, "corr", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Correction => new scala.xml.Elem(null, "correction", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.Country => new scala.xml.Elem(null, "country", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.stringtab.Course => new scala.xml.Elem(null, "course", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.CpMark => new scala.xml.Elem(null, "cpMark", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Creation => new scala.xml.Elem(null, "creation", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Cue => new scala.xml.Elem(null, "cue", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.Curve => new scala.xml.Elem(null, "curve", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Custos => new scala.xml.Elem(null, "custos", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Cutout => new scala.xml.Elem(null, "cutout", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Damage => new scala.xml.Elem(null, "damage", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Date => new scala.xml.Elem(null, "date", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.DecoDesc => new scala.xml.Elem(null, "decoDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.DecoNote => new scala.xml.Elem(null, "decoNote", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Dedicatee => new scala.xml.Elem(null, "dedicatee", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Dedication => new scala.xml.Elem(null, "dedication", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Del => new scala.xml.Elem(null, "del", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Depth => new scala.xml.Elem(null, "depth", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Desc => new scala.xml.Elem(null, "desc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Dim => new scala.xml.Elem(null, "dim", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Dimensions => new scala.xml.Elem(null, "dimensions", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Dir => new scala.xml.Elem(null, "dir", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Distributor => new scala.xml.Elem(null, "distributor", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.District => new scala.xml.Elem(null, "district", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Div => new scala.xml.Elem(null, "div", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.DivLine => new scala.xml.Elem(null, "divLine", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.DomainsDecl => new scala.xml.Elem(null, "domainsDecl", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Dot => new scala.xml.Elem(null, "dot", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Dynam => new scala.xml.Elem(null, "dynam", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Edition => new scala.xml.Elem(null, "edition", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.EditionStmt => new scala.xml.Elem(null, "editionStmt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Editor => new scala.xml.Elem(null, "editor", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.EditorialDecl => new scala.xml.Elem(null, "editorialDecl", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.EncodingDesc => new scala.xml.Elem(null, "encodingDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Ending => new scala.xml.Elem(null, "ending", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Epigraph => new scala.xml.Elem(null, "epigraph", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Episema => new scala.xml.Elem(null, "episema", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Event => new scala.xml.Elem(null, "event", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.EventList => new scala.xml.Elem(null, "eventList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ExhibHist => new scala.xml.Elem(null, "exhibHist", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Expan => new scala.xml.Elem(null, "expan", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Expansion => new scala.xml.Elem(null, "expansion", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Explicit => new scala.xml.Elem(null, "explicit", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.frbr.Expression => new scala.xml.Elem(null, "expression", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.frbr.ExpressionList => new scala.xml.Elem(null, "expressionList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.ExtData => new scala.xml.Elem(null, "extData", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ExtMeta => new scala.xml.Elem(null, "extMeta", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Extent => new scala.xml.Elem(null, "extent", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.harmony.F => new scala.xml.Elem(null, "f", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.FTrem => new scala.xml.Elem(null, "fTrem", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.facsimile.Facsimile => new scala.xml.Elem(null, "facsimile", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.FamName => new scala.xml.Elem(null, "famName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.harmony.Fb => new scala.xml.Elem(null, "fb", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Fermata => new scala.xml.Elem(null, "fermata", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.figtable.Fig => new scala.xml.Elem(null, "fig", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.figtable.FigDesc => new scala.xml.Elem(null, "figDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.FileChar => new scala.xml.Elem(null, "fileChar", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.FileDesc => new scala.xml.Elem(null, "fileDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.fingering.Fing => new scala.xml.Elem(null, "fing", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.fingering.FingGrp => new scala.xml.Elem(null, "fingGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.FoliaDesc => new scala.xml.Elem(null, "foliaDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Foliation => new scala.xml.Elem(null, "foliation", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Folium => new scala.xml.Elem(null, "folium", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.ForeName => new scala.xml.Elem(null, "foreName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Front => new scala.xml.Elem(null, "front", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Funder => new scala.xml.Elem(null, "funder", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Gap => new scala.xml.Elem(null, "gap", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.genetic.GenDesc => new scala.xml.Elem(null, "genDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.GenName => new scala.xml.Elem(null, "genName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.genetic.GenState => new scala.xml.Elem(null, "genState", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Genre => new scala.xml.Elem(null, "genre", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.GeogFeat => new scala.xml.Elem(null, "geogFeat", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.GeogName => new scala.xml.Elem(null, "geogName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Gliss => new scala.xml.Elem(null, "gliss", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.GraceGrp => new scala.xml.Elem(null, "graceGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.figtable.Graphic => new scala.xml.Elem(null, "graphic", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Group => new scala.xml.Elem(null, "group", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.GrpSym => new scala.xml.Elem(null, "grpSym", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Hairpin => new scala.xml.Elem(null, "hairpin", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.HalfmRpt => new scala.xml.Elem(null, "halfmRpt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Hand => new scala.xml.Elem(null, "hand", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.HandList => new scala.xml.Elem(null, "handList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.HandShift => new scala.xml.Elem(null, "handShift", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.harmony.Harm => new scala.xml.Elem(null, "harm", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.HarpPedal => new scala.xml.Elem(null, "harpPedal", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Head => new scala.xml.Elem(null, "head", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Height => new scala.xml.Elem(null, "height", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Heraldry => new scala.xml.Elem(null, "heraldry", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Hex => new scala.xml.Elem(null, "hex", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.HispanTick => new scala.xml.Elem(null, "hispanTick", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.History => new scala.xml.Elem(null, "history", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Identifier => new scala.xml.Elem(null, "identifier", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Imprimatur => new scala.xml.Elem(null, "imprimatur", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Imprint => new scala.xml.Elem(null, "imprint", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Incip => new scala.xml.Elem(null, "incip", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.IncipCode => new scala.xml.Elem(null, "incipCode", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.IncipText => new scala.xml.Elem(null, "incipText", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Inscription => new scala.xml.Elem(null, "inscription", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.InstrDef => new scala.xml.Elem(null, "instrDef", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.InstrGrp => new scala.xml.Elem(null, "instrGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Interpretation => new scala.xml.Elem(null, "interpretation", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.frbr.Item => new scala.xml.Elem(null, "item", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.frbr.ItemList => new scala.xml.Elem(null, "itemList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Key => new scala.xml.Elem(null, "key", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.KeyAccid => new scala.xml.Elem(null, "keyAccid", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.KeySig => new scala.xml.Elem(null, "keySig", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.L => new scala.xml.Elem(null, "l", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Label => new scala.xml.Elem(null, "label", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.LabelAbbr => new scala.xml.Elem(null, "labelAbbr", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.LangUsage => new scala.xml.Elem(null, "langUsage", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Language => new scala.xml.Elem(null, "language", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Layer => new scala.xml.Elem(null, "layer", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.LayerDef => new scala.xml.Elem(null, "layerDef", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Layout => new scala.xml.Elem(null, "layout", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.LayoutDesc => new scala.xml.Elem(null, "layoutDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Lb => new scala.xml.Elem(null, "lb", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.critapp.Lem => new scala.xml.Elem(null, "lem", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Lg => new scala.xml.Elem(null, "lg", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Li => new scala.xml.Elem(null, "li", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Librettist => new scala.xml.Elem(null, "librettist", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.mensural.Ligature => new scala.xml.Elem(null, "ligature", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.Line => new scala.xml.Elem(null, "line", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Liquescent => new scala.xml.Elem(null, "liquescent", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.List => new scala.xml.Elem(null, "list", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Locus => new scala.xml.Elem(null, "locus", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.LocusGrp => new scala.xml.Elem(null, "locusGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Lv => new scala.xml.Elem(null, "lv", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Lyricist => new scala.xml.Elem(null, "lyricist", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MNum => new scala.xml.Elem(null, "mNum", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MRest => new scala.xml.Elem(null, "mRest", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MRpt => new scala.xml.Elem(null, "mRpt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MRpt2 => new scala.xml.Elem(null, "mRpt2", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MSpace => new scala.xml.Elem(null, "mSpace", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.frbr.Manifestation => new scala.xml.Elem(null, "manifestation", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.frbr.ManifestationList => new scala.xml.Elem(null, "manifestationList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.Mapping => new scala.xml.Elem(null, "mapping", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Marker => new scala.xml.Elem(null, "marker", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Mdiv => new scala.xml.Elem(null, "mdiv", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Measure => new scala.xml.Elem(null, "measure", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Mei => new scala.xml.Elem(null, "mei", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.corpus.MeiCorpus => new scala.xml.Elem(null, "meiCorpus", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.MeiHead => new scala.xml.Elem(null, "meiHead", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.mensural.Mensur => new scala.xml.Elem(null, "mensur", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Mensuration => new scala.xml.Elem(null, "mensuration", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.MetaMark => new scala.xml.Elem(null, "metaMark", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.MetaText => new scala.xml.Elem(null, "metaText", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Meter => new scala.xml.Elem(null, "meter", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MeterSig => new scala.xml.Elem(null, "meterSig", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MeterSigGrp => new scala.xml.Elem(null, "meterSigGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Midi => new scala.xml.Elem(null, "midi", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Monogr => new scala.xml.Elem(null, "monogr", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmnornaments.Mordent => new scala.xml.Elem(null, "mordent", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MultiRest => new scala.xml.Elem(null, "multiRest", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.MultiRpt => new scala.xml.Elem(null, "multiRpt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Music => new scala.xml.Elem(null, "music", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Name => new scala.xml.Elem(null, "name", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.NameLink => new scala.xml.Elem(null, "nameLink", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Namespace => new scala.xml.Elem(null, "namespace", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Nc => new scala.xml.Elem(null, "nc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.NcGrp => new scala.xml.Elem(null, "ncGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Neume => new scala.xml.Elem(null, "neume", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Normalization => new scala.xml.Elem(null, "normalization", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Note => new scala.xml.Elem(null, "note", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.NoteOff => new scala.xml.Elem(null, "noteOff", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.NoteOn => new scala.xml.Elem(null, "noteOn", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.NotesStmt => new scala.xml.Elem(null, "notesStmt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Num => new scala.xml.Elem(null, "num", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.OLayer => new scala.xml.Elem(null, "oLayer", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.OStaff => new scala.xml.Elem(null, "oStaff", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Octave => new scala.xml.Elem(null, "octave", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Orig => new scala.xml.Elem(null, "orig", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Oriscus => new scala.xml.Elem(null, "oriscus", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Ornam => new scala.xml.Elem(null, "ornam", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Ossia => new scala.xml.Elem(null, "ossia", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.OtherChar => new scala.xml.Elem(null, "otherChar", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.P => new scala.xml.Elem(null, "p", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Pad => new scala.xml.Elem(null, "pad", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Part => new scala.xml.Elem(null, "part", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Parts => new scala.xml.Elem(null, "parts", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Patch => new scala.xml.Elem(null, "patch", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Pb => new scala.xml.Elem(null, "pb", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Pedal => new scala.xml.Elem(null, "pedal", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PerfDuration => new scala.xml.Elem(null, "perfDuration", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PerfMedium => new scala.xml.Elem(null, "perfMedium", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PerfRes => new scala.xml.Elem(null, "perfRes", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PerfResList => new scala.xml.Elem(null, "perfResList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.performance.Performance => new scala.xml.Elem(null, "performance", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.PeriodName => new scala.xml.Elem(null, "periodName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.PersName => new scala.xml.Elem(null, "persName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.PgDesc => new scala.xml.Elem(null, "pgDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.PgFoot => new scala.xml.Elem(null, "pgFoot", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.PgHead => new scala.xml.Elem(null, "pgHead", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Phrase => new scala.xml.Elem(null, "phrase", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PhysDesc => new scala.xml.Elem(null, "physDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.PhysLoc => new scala.xml.Elem(null, "physLoc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PhysMedium => new scala.xml.Elem(null, "physMedium", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PlateNum => new scala.xml.Elem(null, "plateNum", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PlayingSpeed => new scala.xml.Elem(null, "playingSpeed", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.mensural.Plica => new scala.xml.Elem(null, "plica", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Port => new scala.xml.Elem(null, "port", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.PostBox => new scala.xml.Elem(null, "postBox", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.PostCode => new scala.xml.Elem(null, "postCode", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Price => new scala.xml.Elem(null, "price", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Prog => new scala.xml.Elem(null, "prog", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ProjectDesc => new scala.xml.Elem(null, "projectDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.PropName => new scala.xml.Elem(null, "propName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.PropValue => new scala.xml.Elem(null, "propValue", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.mensural.Proport => new scala.xml.Elem(null, "proport", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Provenance => new scala.xml.Elem(null, "provenance", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.ptrref.Ptr => new scala.xml.Elem(null, "ptr", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.PubPlace => new scala.xml.Elem(null, "pubPlace", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.PubStmt => new scala.xml.Elem(null, "pubStmt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Publisher => new scala.xml.Elem(null, "publisher", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Q => new scala.xml.Elem(null, "q", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Quilisma => new scala.xml.Elem(null, "quilisma", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Quote => new scala.xml.Elem(null, "quote", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.critapp.Rdg => new scala.xml.Elem(null, "rdg", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Recipient => new scala.xml.Elem(null, "recipient", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.performance.Recording => new scala.xml.Elem(null, "recording", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.ptrref.Ref => new scala.xml.Elem(null, "ref", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.lyrics.Refrain => new scala.xml.Elem(null, "refrain", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Reg => new scala.xml.Elem(null, "reg", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.Region => new scala.xml.Elem(null, "region", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Reh => new scala.xml.Elem(null, "reh", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.RelatedItem => new scala.xml.Elem(null, "relatedItem", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Relation => new scala.xml.Elem(null, "relation", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.RelationList => new scala.xml.Elem(null, "relationList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Rend => new scala.xml.Elem(null, "rend", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.RepeatMark => new scala.xml.Elem(null, "repeatMark", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Repository => new scala.xml.Elem(null, "repository", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Resp => new scala.xml.Elem(null, "resp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.RespStmt => new scala.xml.Elem(null, "respStmt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Rest => new scala.xml.Elem(null, "rest", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Restore => new scala.xml.Elem(null, "restore", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.RevisionDesc => new scala.xml.Elem(null, "revisionDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Role => new scala.xml.Elem(null, "role", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.RoleDesc => new scala.xml.Elem(null, "roleDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.RoleName => new scala.xml.Elem(null, "roleName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Rubric => new scala.xml.Elem(null, "rubric", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.SamplingDecl => new scala.xml.Elem(null, "samplingDecl", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Sb => new scala.xml.Elem(null, "sb", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Score => new scala.xml.Elem(null, "score", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.ScoreDef => new scala.xml.Elem(null, "scoreDef", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.ScoreFormat => new scala.xml.Elem(null, "scoreFormat", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.ScriptDesc => new scala.xml.Elem(null, "scriptDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.ScriptNote => new scala.xml.Elem(null, "scriptNote", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Seal => new scala.xml.Elem(null, "seal", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.SealDesc => new scala.xml.Elem(null, "sealDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.SecFolio => new scala.xml.Elem(null, "secFolio", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Section => new scala.xml.Elem(null, "section", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.text.Seg => new scala.xml.Elem(null, "seg", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Segmentation => new scala.xml.Elem(null, "segmentation", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.SeqNum => new scala.xml.Elem(null, "seqNum", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Series => new scala.xml.Elem(null, "series", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.SeriesStmt => new scala.xml.Elem(null, "seriesStmt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.Settlement => new scala.xml.Elem(null, "settlement", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Sic => new scala.xml.Elem(null, "sic", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Signatures => new scala.xml.Elem(null, "signatures", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.SignifLet => new scala.xml.Elem(null, "signifLet", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Slur => new scala.xml.Elem(null, "slur", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.SoundChan => new scala.xml.Elem(null, "soundChan", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Source => new scala.xml.Elem(null, "source", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.SourceDesc => new scala.xml.Elem(null, "sourceDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.drama.Sp => new scala.xml.Elem(null, "sp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Space => new scala.xml.Elem(null, "space", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Speaker => new scala.xml.Elem(null, "speaker", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.SpecRepro => new scala.xml.Elem(null, "specRepro", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Sponsor => new scala.xml.Elem(null, "sponsor", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Stack => new scala.xml.Elem(null, "stack", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Staff => new scala.xml.Elem(null, "staff", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.StaffDef => new scala.xml.Elem(null, "staffDef", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.StaffGrp => new scala.xml.Elem(null, "staffGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.drama.StageDir => new scala.xml.Elem(null, "stageDir", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Stamp => new scala.xml.Elem(null, "stamp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.StdVals => new scala.xml.Elem(null, "stdVals", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.mensural.Stem => new scala.xml.Elem(null, "stem", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.Street => new scala.xml.Elem(null, "street", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.stringtab.String => new scala.xml.Elem(null, "string", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Strophicus => new scala.xml.Elem(null, "strophicus", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.namesdates.StyleName => new scala.xml.Elem(null, "styleName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Subst => new scala.xml.Elem(null, "subst", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Supplied => new scala.xml.Elem(null, "supplied", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.Support => new scala.xml.Elem(null, "support", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.SupportDesc => new scala.xml.Elem(null, "supportDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.facsimile.Surface => new scala.xml.Elem(null, "surface", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Syl => new scala.xml.Elem(null, "syl", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.neumes.Syllable => new scala.xml.Elem(null, "syllable", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.SymName => new scala.xml.Elem(null, "symName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.SymProp => new scala.xml.Elem(null, "symProp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Symbol => new scala.xml.Elem(null, "symbol", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.SymbolDef => new scala.xml.Elem(null, "symbolDef", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.usersymbols.SymbolTable => new scala.xml.Elem(null, "symbolTable", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.SysReq => new scala.xml.Elem(null, "sysReq", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.stringtab.TabDurSym => new scala.xml.Elem(null, "tabDurSym", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.stringtab.TabGrp => new scala.xml.Elem(null, "tabGrp", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.figtable.Table => new scala.xml.Elem(null, "table", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.TagUsage => new scala.xml.Elem(null, "tagUsage", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.TagsDecl => new scala.xml.Elem(null, "tagsDecl", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Taxonomy => new scala.xml.Elem(null, "taxonomy", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.figtable.Td => new scala.xml.Elem(null, "td", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Tempo => new scala.xml.Elem(null, "tempo", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Term => new scala.xml.Elem(null, "term", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.TermList => new scala.xml.Elem(null, "termList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.TextLang => new scala.xml.Elem(null, "textLang", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.figtable.Th => new scala.xml.Elem(null, "th", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Tie => new scala.xml.Elem(null, "tie", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Title => new scala.xml.Elem(null, "title", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.TitlePage => new scala.xml.Elem(null, "titlePage", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.TitlePart => new scala.xml.Elem(null, "titlePart", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.TitleStmt => new scala.xml.Elem(null, "titleStmt", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.figtable.Tr => new scala.xml.Elem(null, "tr", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.TrackConfig => new scala.xml.Elem(null, "trackConfig", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.TreatHist => new scala.xml.Elem(null, "treatHist", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.TreatSched => new scala.xml.Elem(null, "treatSched", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmnornaments.Trill => new scala.xml.Elem(null, "trill", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.TrkName => new scala.xml.Elem(null, "trkName", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Tuning => new scala.xml.Elem(null, "tuning", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.Tuplet => new scala.xml.Elem(null, "tuplet", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmn.TupletSpan => new scala.xml.Elem(null, "tupletSpan", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.cmnornaments.Turn => new scala.xml.Elem(null, "turn", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.TypeDesc => new scala.xml.Elem(null, "typeDesc", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.msdesc.TypeNote => new scala.xml.Elem(null, "typeNote", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.edittrans.Unclear => new scala.xml.Elem(null, "unclear", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Unpub => new scala.xml.Elem(null, "unpub", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.UseRestrict => new scala.xml.Elem(null, "useRestrict", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.midi.Vel => new scala.xml.Elem(null, "vel", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.lyrics.Verse => new scala.xml.Elem(null, "verse", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.lyrics.Volta => new scala.xml.Elem(null, "volta", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Watermark => new scala.xml.Elem(null, "watermark", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.performance.When => new scala.xml.Elem(null, "when", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.shared.Width => new scala.xml.Elem(null, "width", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.Work => new scala.xml.Elem(null, "work", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.header.WorkList => new scala.xml.Elem(null, "workList", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case e: meiall.mei.facsimile.Zone => new scala.xml.Elem(null, "zone", mkAttributes(e.attributes), scope, true, e.elements.map(el => toXmlWithScope(el, scope))*)
    case _ => throw new IllegalArgumentException(s"Unknown element type: ${element.getClass.getName}")
  }
}
